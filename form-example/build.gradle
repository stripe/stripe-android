apply from: configs.androidApplication

apply plugin: 'com.emergetools.android'
apply plugin: 'com.google.firebase.appdistribution'
apply plugin: 'com.google.gms.google-services'
apply plugin: 'org.jetbrains.kotlin.plugin.serialization'
apply plugin: 'org.jetbrains.kotlin.plugin.compose'

emerge {
    // Api token is implicitly set to the EMERGE_API_TOKEN env variable

    size {
        tag.set(System.getenv("EMERGE_TAG"))
    }

    vcs {
        gitHub {
            repoOwner.set("stripe")
            repoName.set("stripe-android")
        }
    }
}

android {
    defaultConfig {
        applicationId "com.stripe.android.form.example"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"

        versionName VERSION_NAME
        versionCode getVersionCode(versionName)
    }

    buildFeatures {
        compose true
    }
}

dependencies {
    api("org.jetbrains.kotlinx:kotlinx-collections-immutable:0.3.8")

    implementation libs.androidx.activity
    implementation libs.androidx.appCompat
    implementation libs.androidx.coreKtx
    implementation libs.androidx.lifecycle
    implementation libs.compose.activity
    implementation libs.compose.material
    implementation libs.compose.materialIcons
    implementation libs.compose.ui
    implementation libs.compose.uiToolingPreview
    implementation libs.loggingInterceptor
    implementation libs.material
    implementation platform('androidx.compose:compose-bom:2024.04.01')
    implementation 'androidx.compose.ui:ui-graphics'
    implementation 'androidx.compose.material3:material3'
    androidTestImplementation platform('androidx.compose:compose-bom:2024.04.01')

    debugImplementation libs.compose.uiTestManifest
    debugImplementation libs.compose.uiTooling
    debugImplementation libs.leakCanary

    testImplementation testLibs.androidx.junit
    testImplementation testLibs.junit

    androidTestImplementation testLibs.espresso.core
    androidTestImplementation testLibs.androidx.composeUi
}
