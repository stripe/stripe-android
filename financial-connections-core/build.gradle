apply from: configs.androidLibrary

apply plugin: 'checkstyle'
apply plugin: 'org.jetbrains.kotlin.plugin.parcelize'
apply plugin: 'kotlinx-serialization'
apply plugin: 'com.google.devtools.ksp'

android {
    defaultConfig {
        testApplicationId "com.stripe.android.financialconnections.test"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }
    testOptions {
        unitTests {
            includeAndroidResources = true
        }
    }
}

dependencies {
    api project(":stripe-core")
    api project(":payments-model")

    implementation libs.androidx.annotation
    implementation libs.showkaseAnnotation
    implementation libs.dagger
    implementation libs.kotlin.coroutines
    implementation libs.kotlin.coroutinesAndroid
    implementation libs.kotlin.serialization

    debugImplementation libs.showkase

    ksp libs.daggerCompiler

    kspDebug libs.showkaseProcessor

    testImplementation testLibs.json
    testImplementation testLibs.junit
    testImplementation testLibs.kotlin.annotations
    testImplementation testLibs.kotlin.coroutines
    testImplementation testLibs.kotlin.junit
    testImplementation testLibs.mockito.core
    testImplementation testLibs.mockito.inline
    testImplementation testLibs.mockito.kotlin
    testImplementation testLibs.robolectric
    testImplementation testLibs.testParameterInjector
    testImplementation testLibs.turbine
    testImplementation testLibs.truth

    androidTestImplementation testLibs.espresso.core
    androidTestImplementation testLibs.espresso.intents
    androidTestImplementation testLibs.truth

    kspAndroidTest libs.showkaseProcessor

    androidTestUtil testLibs.testOrchestrator
}

android {
    kotlinOptions {
        freeCompilerArgs += [
                "-opt-in=kotlin.RequiresOptIn",
                "-opt-in=androidx.compose.material.ExperimentalMaterialApi",
                "-Xconsistent-data-class-copy-visibility",
        ]
    }
}

ext {
    artifactId = "financial-connections-core"
    artifactName = "financial-connections-core"
    artifactDescrption = "The financial connections core module of Stripe Android SDK"
}

apply from: "${rootDir}/deploy/deploy.gradle"
