appId: com.stripe.android.financialconnections.example
tags:
  - all
  - livemode-data
---
- launchApp
- startRecording: /tmp/test_results/testmode-data-testoauthinstitution
- tapOn: "Playground"
- tapOn:
    id: "Native option"
- tapOn:
    id: "Data option"
- tapOn:
    id: "Merchant setting"
- tapOn:
    id: "Livetesting option"
- tapOn: "Connect Accounts!"
# Wait until the consent button is visible
- extendedWaitUntil:
    visible:
      id: "consent_cta"
    timeout: 30000
# Common: web AuthFlow - connect OAuth institution
- tapOn: "Agree and continue"
# SEARCH AND SELECT FINBANK INSTITUTION
- tapOn: "Search"
- inputText: "mx"
- tapOn: "MX Bank (Oauth)"
- tapOn: "Continue"
####### Bypass Chrome on-boarding screen #######
- runFlow:
    file: ../common/subflow-skip-chrome-welcome.yaml
# LOG IN WITH TEST FINBANK INSTITUTION
- tapOn: "Authorize"
###############################################
# SELECT ALL ACCOUNTS
# - Mx bank skips account selection
# CONFIRM AND COMPLETE
- assertVisible: ".*Success.*"
- tapOn: "Done"
- assertVisible: ".*Completed!.*"
- assertVisible: ".*MX Bank.*"
- stopRecording
